package com.odorok.OdorokApplication.region.repository;

import com.odorok.OdorokApplication.commons.querydsl.config.QueryDslConfig;
import com.odorok.OdorokApplication.infrastructures.domain.Sigungu;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.context.annotation.Import;
import org.springframework.test.context.ActiveProfiles;

import java.util.Arrays;
import java.util.List;

import static org.assertj.core.api.AssertionsForClassTypes.assertThat;

@DataJpaTest
@Import(QueryDslConfig.class)
@ActiveProfiles("test")
class SigunguRepositoryTest {
    private final int SEOUL_SIDO_CODE = 1;
    private final int NO_SIDO_CODE = 100;

    @Autowired
    private SigunguRepository sigunguRepository;

    @BeforeEach
    void setUp() {
        sigunguRepository.deleteAll();
        List<Sigungu> sigungus = Arrays.asList(
            new Sigungu(235, 1, "강남구", 1),
            new Sigungu(236, 2, "강동구", 1),
            new Sigungu(237, 3, "강북구", 1),
            new Sigungu(238, 4, "강서구", 1),
            new Sigungu(239, 5, "관악구", 1),
            new Sigungu(240, 6, "광진구", 1),
            new Sigungu(241, 7, "구로구", 1),
            new Sigungu(242, 8, "금천구", 1),
            new Sigungu(243, 9, "노원구", 1),
            new Sigungu(244, 10, "도봉구", 1),
            new Sigungu(245, 11, "동대문구", 1),
            new Sigungu(246, 12, "동작구", 1),
            new Sigungu(247, 13, "마포구", 1),
            new Sigungu(248, 14, "서대문구", 1),
            new Sigungu(249, 15, "서초구", 1),
            new Sigungu(250, 16, "성동구", 1),
            new Sigungu(251, 17, "성북구", 1),
            new Sigungu(252, 18, "송파구", 1),
            new Sigungu(253, 19, "양천구", 1),
            new Sigungu(254, 20, "영등포구", 1),
            new Sigungu(255, 21, "용산구", 1),
            new Sigungu(256, 22, "은평구", 1),
            new Sigungu(257, 23, "종로구", 1),
            new Sigungu(258, 24, "중구", 1),
            new Sigungu(259, 25, "중랑구", 1),
            new Sigungu(260, 1, "강화군", 2),
            new Sigungu(261, 2, "계양구", 2),
            new Sigungu(262, 3, "미추홀구", 2),
            new Sigungu(263, 4, "남동구", 2),
            new Sigungu(264, 5, "동구", 2),
            new Sigungu(265, 6, "부평구", 2),
            new Sigungu(266, 7, "서구", 2),
            new Sigungu(267, 8, "연수구", 2),
            new Sigungu(268, 9, "옹진군", 2),
            new Sigungu(269, 10, "중구", 2),
            new Sigungu(270, 1, "대덕구", 3),
            new Sigungu(271, 2, "동구", 3),
            new Sigungu(272, 3, "서구", 3),
            new Sigungu(273, 4, "유성구", 3),
            new Sigungu(274, 5, "중구", 3),
            new Sigungu(275, 1, "남구", 4),
            new Sigungu(276, 2, "달서구", 4),
            new Sigungu(277, 3, "달성군", 4),
            new Sigungu(278, 4, "동구", 4),
            new Sigungu(279, 5, "북구", 4),
            new Sigungu(280, 6, "서구", 4),
            new Sigungu(281, 7, "수성구", 4),
            new Sigungu(282, 8, "중구", 4),
            new Sigungu(283, 9, "군위군", 4),
            new Sigungu(284, 1, "광산구", 5),
            new Sigungu(285, 2, "남구", 5),
            new Sigungu(286, 3, "동구", 5),
            new Sigungu(287, 4, "북구", 5),
            new Sigungu(288, 5, "서구", 5),
            new Sigungu(289, 1, "강서구", 6),
            new Sigungu(290, 2, "금정구", 6),
            new Sigungu(291, 3, "기장군", 6),
            new Sigungu(292, 4, "남구", 6),
            new Sigungu(293, 5, "동구", 6),
            new Sigungu(294, 6, "동래구", 6),
            new Sigungu(295, 7, "부산진구", 6),
            new Sigungu(296, 8, "북구", 6),
            new Sigungu(297, 9, "사상구", 6),
            new Sigungu(298, 10, "사하구", 6),
            new Sigungu(299, 11, "서구", 6),
            new Sigungu(300, 12, "수영구", 6),
            new Sigungu(301, 13, "연제구", 6),
            new Sigungu(302, 14, "영도구", 6),
            new Sigungu(303, 15, "중구", 6),
            new Sigungu(304, 16, "해운대구", 6),
            new Sigungu(305, 1, "중구", 7),
            new Sigungu(306, 2, "남구", 7),
            new Sigungu(307, 3, "동구", 7),
            new Sigungu(308, 4, "북구", 7),
            new Sigungu(309, 5, "울주군", 7),
            new Sigungu(310, 1, "세종특별자치시", 8),
            new Sigungu(311, 1, "가평군", 31),
            new Sigungu(312, 2, "고양시", 31),
            new Sigungu(313, 3, "과천시", 31),
            new Sigungu(314, 4, "광명시", 31),
            new Sigungu(315, 5, "광주시", 31),
            new Sigungu(316, 6, "구리시", 31),
            new Sigungu(317, 7, "군포시", 31),
            new Sigungu(318, 8, "김포시", 31),
            new Sigungu(319, 9, "남양주시", 31),
            new Sigungu(320, 10, "동두천시", 31),
            new Sigungu(321, 11, "부천시", 31),
            new Sigungu(322, 12, "성남시", 31),
            new Sigungu(323, 13, "수원시", 31),
            new Sigungu(324, 14, "시흥시", 31),
            new Sigungu(325, 15, "안산시", 31),
            new Sigungu(326, 16, "안성시", 31),
            new Sigungu(327, 17, "안양시", 31),
            new Sigungu(328, 18, "양주시", 31),
            new Sigungu(329, 19, "양평군", 31),
            new Sigungu(330, 20, "여주시", 31),
            new Sigungu(331, 21, "연천군", 31),
            new Sigungu(332, 22, "오산시", 31),
            new Sigungu(333, 23, "용인시", 31),
            new Sigungu(334, 24, "의왕시", 31),
            new Sigungu(335, 25, "의정부시", 31),
            new Sigungu(336, 26, "이천시", 31),
            new Sigungu(337, 27, "파주시", 31),
            new Sigungu(338, 28, "평택시", 31),
            new Sigungu(339, 29, "포천시", 31),
            new Sigungu(340, 30, "하남시", 31),
            new Sigungu(341, 31, "화성시", 31),
            new Sigungu(342, 1, "강릉시", 32),
            new Sigungu(343, 2, "고성군", 32),
            new Sigungu(344, 3, "동해시", 32),
            new Sigungu(345, 4, "삼척시", 32),
            new Sigungu(346, 5, "속초시", 32),
            new Sigungu(347, 6, "양구군", 32),
            new Sigungu(348, 7, "양양군", 32),
            new Sigungu(349, 8, "영월군", 32),
            new Sigungu(350, 9, "원주시", 32),
            new Sigungu(351, 10, "인제군", 32),
            new Sigungu(352, 11, "정선군", 32),
            new Sigungu(353, 12, "철원군", 32),
            new Sigungu(354, 13, "춘천시", 32),
            new Sigungu(355, 14, "태백시", 32),
            new Sigungu(356, 15, "평창군", 32),
            new Sigungu(357, 16, "홍천군", 32),
            new Sigungu(358, 17, "화천군", 32),
            new Sigungu(359, 18, "횡성군", 32),
            new Sigungu(360, 1, "괴산군", 33),
            new Sigungu(361, 2, "단양군", 33),
            new Sigungu(362, 3, "보은군", 33),
            new Sigungu(363, 4, "영동군", 33),
            new Sigungu(364, 5, "옥천군", 33),
            new Sigungu(365, 6, "음성군", 33),
            new Sigungu(366, 7, "제천시", 33),
            new Sigungu(367, 8, "진천군", 33),
            new Sigungu(368, 9, "청원군", 33),
            new Sigungu(369, 10, "청주시", 33),
            new Sigungu(370, 11, "충주시", 33),
            new Sigungu(371, 12, "증평군", 33),
            new Sigungu(372, 1, "공주시", 34),
            new Sigungu(373, 2, "금산군", 34),
            new Sigungu(374, 3, "논산시", 34),
            new Sigungu(375, 4, "당진시", 34),
            new Sigungu(376, 5, "보령시", 34),
            new Sigungu(377, 6, "부여군", 34),
            new Sigungu(378, 7, "서산시", 34),
            new Sigungu(379, 8, "서천군", 34),
            new Sigungu(380, 9, "아산시", 34),
            new Sigungu(381, 11, "예산군", 34),
            new Sigungu(382, 12, "천안시", 34),
            new Sigungu(383, 13, "청양군", 34),
            new Sigungu(384, 14, "태안군", 34),
            new Sigungu(385, 15, "홍성군", 34),
            new Sigungu(386, 16, "계룡시", 34),
            new Sigungu(387, 1, "경산시", 35),
            new Sigungu(388, 2, "경주시", 35),
            new Sigungu(389, 3, "고령군", 35),
            new Sigungu(390, 4, "구미시", 35),
            new Sigungu(391, 6, "김천시", 35),
            new Sigungu(392, 7, "문경시", 35),
            new Sigungu(393, 8, "봉화군", 35),
            new Sigungu(394, 9, "상주시", 35),
            new Sigungu(395, 10, "성주군", 35),
            new Sigungu(396, 11, "안동시", 35),
            new Sigungu(397, 12, "영덕군", 35),
            new Sigungu(398, 13, "영양군", 35),
            new Sigungu(399, 14, "영주시", 35),
            new Sigungu(400, 15, "영천시", 35),
            new Sigungu(401, 16, "예천군", 35),
            new Sigungu(402, 17, "울릉군", 35),
            new Sigungu(403, 18, "울진군", 35),
            new Sigungu(404, 19, "의성군", 35),
            new Sigungu(405, 20, "청도군", 35),
            new Sigungu(406, 21, "청송군", 35),
            new Sigungu(407, 22, "칠곡군", 35),
            new Sigungu(408, 23, "포항시", 35),
            new Sigungu(409, 1, "거제시", 36),
            new Sigungu(410, 2, "거창군", 36),
            new Sigungu(411, 3, "고성군", 36),
            new Sigungu(412, 4, "김해시", 36),
            new Sigungu(413, 5, "남해군", 36),
            new Sigungu(414, 6, "마산시", 36),
            new Sigungu(415, 7, "밀양시", 36),
            new Sigungu(416, 8, "사천시", 36),
            new Sigungu(417, 9, "산청군", 36),
            new Sigungu(418, 10, "양산시", 36),
            new Sigungu(419, 12, "의령군", 36),
            new Sigungu(420, 13, "진주시", 36),
            new Sigungu(421, 14, "진해시", 36),
            new Sigungu(422, 15, "창녕군", 36),
            new Sigungu(423, 16, "창원시", 36),
            new Sigungu(424, 17, "통영시", 36),
            new Sigungu(425, 18, "하동군", 36),
            new Sigungu(426, 19, "함안군", 36),
            new Sigungu(427, 20, "함양군", 36),
            new Sigungu(428, 21, "합천군", 36),
            new Sigungu(429, 1, "고창군", 37),
            new Sigungu(430, 2, "군산시", 37),
            new Sigungu(431, 3, "김제시", 37),
            new Sigungu(432, 4, "남원시", 37),
            new Sigungu(433, 5, "무주군", 37),
            new Sigungu(434, 6, "부안군", 37),
            new Sigungu(435, 7, "순창군", 37),
            new Sigungu(436, 8, "완주군", 37),
            new Sigungu(437, 9, "익산시", 37),
            new Sigungu(438, 10, "임실군", 37),
            new Sigungu(439, 11, "장수군", 37),
            new Sigungu(440, 12, "전주시", 37),
            new Sigungu(441, 13, "정읍시", 37),
            new Sigungu(442, 14, "진안군", 37),
            new Sigungu(443, 1, "강진군", 38),
            new Sigungu(444, 2, "고흥군", 38),
            new Sigungu(445, 3, "곡성군", 38),
            new Sigungu(446, 4, "광양시", 38),
            new Sigungu(447, 5, "구례군", 38),
            new Sigungu(448, 6, "나주시", 38),
            new Sigungu(449, 7, "담양군", 38),
            new Sigungu(450, 8, "목포시", 38),
            new Sigungu(451, 9, "무안군", 38),
            new Sigungu(452, 10, "보성군", 38),
            new Sigungu(453, 11, "순천시", 38),
            new Sigungu(454, 12, "신안군", 38),
            new Sigungu(455, 13, "여수시", 38),
            new Sigungu(456, 16, "영광군", 38),
            new Sigungu(457, 17, "영암군", 38),
            new Sigungu(458, 18, "완도군", 38),
            new Sigungu(459, 19, "장성군", 38),
            new Sigungu(460, 20, "장흥군", 38),
            new Sigungu(461, 21, "진도군", 38),
            new Sigungu(462, 22, "함평군", 38),
            new Sigungu(463, 23, "해남군", 38),
            new Sigungu(464, 24, "화순군", 38),
            new Sigungu(465, 1, "남제주군", 39),
            new Sigungu(466, 2, "북제주군", 39),
            new Sigungu(467, 3, "서귀포시", 39),
            new Sigungu(468, 4, "제주시", 39)
        );
        sigunguRepository.saveAll(sigungus);
    }

    @AfterEach
    void tearDown() {
        sigunguRepository.deleteAll();
    }

    @Test
    public void 시군구_조회에_성공한다() {
        List<Sigungu> result = sigunguRepository.findBySidoCode(SEOUL_SIDO_CODE);

        assertThat(result.size()).isNotZero();
    }

    @Test
    public void 없는_시도의_행정동_조회에서_빈_리스트가_출력된다() {
        List<Sigungu> result = sigunguRepository.findBySidoCode(NO_SIDO_CODE);

        assertThat(result.size()).isZero();
    }
}
